{"version":3,"sources":["scripts/main.js"],"names":["document","querySelectorAll","cells","button","querySelector","messageLose","messageWin","startText","score","emptyCellIndex","arrayCell","emptyCell","i","length","textContent","push","randomizer","emptyCellArray","valueCell","Math","random","randomIndex","index","floor","classList","add","MoveLeft","forEach","elementTr","beginRow","move","addCells","MoveRight","reverse","MoveUp","line","MoveDown","filter","element","className","number","nextNumber","remove","checkLose","array","arrayRows","k","addEventListener","body","e","contains","lines","line1","line2","line3","line4","lineCell","newCells","key"],"mappings":"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","file":"main.5247dd14.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst [...cells] = document.querySelectorAll('td');\nconst button = document.querySelector('button');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst startText = document.querySelector('.message-start');\nconst score = document.querySelector('.game-score');\n\nfunction emptyCellIndex(arrayCell) {\n  const emptyCell = [];\n\n  for (let i = 0; i < arrayCell.length; i++) {\n    if (!arrayCell[i].textContent.length) {\n      emptyCell.push(i);\n    }\n  }\n\n  return emptyCell;\n}\n\nbutton.addEventListener('click', () => {\n  button.textContent = 'Reset';\n  button.classList.remove('start');\n  button.classList.add('restart');\n  score.textContent = '0';\n\n  startText.classList.add('hidden');\n  messageLose.classList.add('hidden');\n  messageWin.classList.add('hidden');\n\n  for (let i = 0; i < cells.length; i++) {\n    cells[i].textContent = '';\n    cells[i].className = 'field-cell';\n  }\n\n  randomizer();\n  randomizer();\n});\n\ndocument.body.addEventListener('keydown', (e) => {\n  if (button.textContent === 'Start') {\n    return;\n  }\n\n  if (!messageLose.classList.contains('hidden')) {\n    return;\n  }\n\n  const [...lines] = document.querySelectorAll('tr');\n  const line1 = [];\n  const line2 = [];\n  const line3 = [];\n  const line4 = [];\n\n  for (let i = 0; i < lines.length; i++) {\n    const [...lineCell] = lines[i].querySelectorAll('td');\n\n    line1.push(lineCell[0]);\n    line2.push(lineCell[1]);\n    line3.push(lineCell[2]);\n    line4.push(lineCell[3]);\n  }\n\n  const newCells = [];\n\n  cells.forEach(element => {\n    newCells.push({ textContent: element.textContent });\n  });\n\n  switch (e.key) {\n    case 'ArrowLeft':\n      MoveLeft();\n      break;\n    case 'ArrowRight':\n      MoveRight();\n      break;\n    case 'ArrowUp':\n      MoveUp(line1);\n      MoveUp(line2);\n      MoveUp(line3);\n      MoveUp(line4);\n      break;\n    case 'ArrowDown':\n      MoveDown(line1);\n      MoveDown(line2);\n      MoveDown(line3);\n      MoveDown(line4);\n      break;\n  }\n\n  const emptyCellArray = emptyCellIndex(cells);\n\n  if (checkLose(lines) && !emptyCellArray.length) {\n    messageLose.classList.remove('hidden');\n  }\n\n  for (let i = 0; i < cells.length; i++) {\n    if (cells[i].textContent === '2048') {\n      messageWin.classList.remove('hidden');\n    }\n\n    if (cells[i].textContent !== newCells[i].textContent) {\n      randomizer();\n\n      return;\n    }\n  }\n});\n\nfunction randomizer() {\n  const emptyCellArray = emptyCellIndex(cells);\n\n  let valueCell = Math.random();\n\n  if (valueCell > 0.9) {\n    valueCell = 4;\n  } else {\n    valueCell = 2;\n  }\n\n  const randomIndex = Math.floor(Math.random() * emptyCellArray.length);\n  const index = emptyCellArray[randomIndex];\n\n  cells[index].textContent = valueCell;\n  cells[index].classList.add(`field-cell--${valueCell}`);\n}\n\nfunction MoveLeft() {\n  const [...linesTr] = document.querySelectorAll('tr');\n\n  linesTr.forEach(elementTr => {\n    const [...beginRow] = elementTr.querySelectorAll('td');\n\n    move(beginRow);\n\n    addCells(beginRow);\n\n    move(beginRow);\n  });\n}\n\nfunction MoveRight() {\n  const [...linesTr] = document.querySelectorAll('tr');\n\n  linesTr.forEach(elementTr => {\n    const [...beginRow] = elementTr.querySelectorAll('td');\n\n    move(beginRow);\n    beginRow.reverse();\n\n    addCells(beginRow);\n\n    move(beginRow);\n    beginRow.reverse();\n  });\n}\n\nfunction MoveUp(line) {\n  move(line);\n\n  addCells(line);\n\n  move(line);\n}\n\nfunction MoveDown(line) {\n  move(line);\n  line.reverse();\n\n  addCells(line);\n\n  move(line);\n  line.reverse();\n}\n\nfunction move(line) {\n  const valueCell = line.filter(element => element.textContent !== '');\n\n  line.forEach((element, index) => {\n    if (valueCell[index]) {\n      element.textContent = valueCell[index].textContent;\n      element.className = valueCell[index].className;\n    } else {\n      element.textContent = '';\n      element.className = 'field-cell';\n    }\n  });\n}\n\nfunction addCells(line) {\n  for (let i = 0; i < line.length; i++) {\n    const number = +line[i].textContent;\n\n    if (i < line.length - 1 && number > 0) {\n      const nextNumber = +line[i + 1].textContent;\n\n      if (number > 0 && number === nextNumber) {\n        line[i].textContent = `${number + nextNumber}`;\n        line[i].classList.remove(`field-cell--${number}`);\n        line[i].classList.add(`field-cell--${+line[i].textContent}`);\n        line[i + 1].textContent = '';\n        line[i + 1].className = 'field-cell';\n\n        score.textContent = `${+score.textContent + (+line[i].textContent)}`;\n      }\n    }\n  }\n}\n\nfunction checkLose(array) {\n  const arrayRows = [];\n\n  array.forEach((element) =>\n    arrayRows.push([...element.querySelectorAll('td')]));\n\n  for (let i = 0; i < arrayRows.length; i++) {\n    for (let k = 0; k < arrayRows[i].length; k++) {\n      if (arrayRows[i + 1]) {\n        if (arrayRows[i][k].textContent === arrayRows[i + 1][k].textContent) {\n          return false;\n        }\n      }\n\n      if (arrayRows[i][k + 1]) {\n        if (arrayRows[i][k].textContent === arrayRows[i][k + 1].textContent) {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n"]}